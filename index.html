<!DOCTYPE html>
<html lang="es">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encriptador/Desencriptador</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600&display=swap" rel="stylesheet">
    <link rel="icon" href="imagenes/icono.png">
</head>

<body>
    
    <header>

    <img src="imagenes/z_logo.png">
    <img src="imagenes/logo_super.png">
    <h1>Encriptador/Desencriptador el <br> principe de la destrucción</h1>

    </header>

    <div class="texto_encriptado">

    <textarea placeholder="Ingrese el texto aqui" id="texto-encriptar"></textarea>
    <div>

        <img src="imagenes/vegeta_logo.png" class="ocultar">
        <img src="imagenes/Ningún mensaje fue encontrado.png" class="ocultar">
        <img src="imagenes/Ingresa el texto que desees encriptar o desencriptar.png" class="ocultar">

        <!--texto para copiar, se agrega un style inline para que se pueda cambiar el display con JS-->

        <textarea id="resultado" style="display: none;"></textarea>
        <button id="boton-copiar" style="display: none;">Copiar</button>

    </div>

    </div>
    <div class="boton-encriptar">

        <button id="chacha">Encriptar</button>
        <button id="desen">Desencriptar</button>
        
    </div>

    <footer>

        <a href="https://www.linkedin.com/in/hernanperezfree/" target="_blank">

            <ul>

                <img src="imagenes/linkedin_icono.png" style="width: 20%;
                padding: 0 30px;">
            </ul>
        </a>

        <a href="https://github.com/felipoeroek" target="_blank">

            <ul>

                <img src="imagenes/github_icono.png">
            </ul>
        </a>
        <p>Hernán Felipe Pérez Díaz</p>
        
    </footer>

    <!--scripts-->

    <script>
        
    document.getElementById("boton-copiar").onclick = function copiar(){

    var texto = document.getElementById("resultado").value;
    navigator.clipboard.writeText(texto);

    }

    function ocultarMostrar(){

        var oculto = document.getElementsByClassName("ocultar");
        var visibleBoton = document.getElementById("boton-copiar");

        //se crea un bucle para seleccionar la clase de imagenes .ocultar y ocultarlas

        for (var ocultar = 0; ocultar < 3; ocultar++) {
            
            oculto[ocultar].style.display = 'none';
        }

        visibleArea.style.display = '';
        visibleBoton.style.display = '';
    }

    // se repite un array debido que el array letras guarda sus resultados con otra igualdad de un bucle con if y no deja con vocales repetidas

    var visibleArea = document.getElementById("resultado");
    var letrasConvertidas = ["enter", "imes", "ai", "ober", "ufat"];
    var letras = ["e", "i", "a", "o", "u"];

    function encriptarMostrarOcultar(){

        var textoEncriptar = document.getElementById("texto-encriptar").value;

        // la variable booleana true para ver si se cumple o no un if
        var aceptar = true;

        if(textoEncriptar.length == 0){

            alert("ingrese texto");
        }
        else if(textoEncriptar.length >= 1){

            ocultarMostrar();

            // la variable almacenar por fuera del bucle para que se conserve con el push

            var almacenar = [];

            for(var caracter = 0; caracter < textoEncriptar.length; caracter++){
            
                var convertir = 0;

                    while(convertir < letras.length){
    
                        if(textoEncriptar[caracter] == letras[convertir]){

                            aceptar = false;  
                            //pushear primero los valores para guardarlos, luego agreger al area visible y el join para quitar comas

                            almacenar.push(letrasConvertidas[convertir]);
                            visibleArea.value = almacenar.join("");
                            break;                                    
                        }  
                        else{

                            aceptar = true;
                        }
                        convertir++;
                    }
                    if(aceptar == true){

                        almacenar.push(textoEncriptar[caracter]);
                        visibleArea.value = almacenar.join("");
                    }
                    
            }

        }
    }
    
    function desencriptarMostrarOcultar(){
   
        var textoEncriptar = document.getElementById("texto-encriptar").value;;

        if(textoEncriptar.length == 0){

            alert("ingrese texto");
        }
        else if(textoEncriptar.length >= 1){

            ocultarMostrar();

            // las variables por fuera del bucle para que se conserve con el push
            var almacenar = [];
            var almacenarDos = [];

            for(var caracter = 0; caracter < textoEncriptar.length; caracter++){

            //primer if para comparar si es una vocal y luego almacenar, luego el else if en caso de que la variable almacenar estuviera vacia para pushear a almacenarDos, y el else por si almacenar ya tuviese valor
                if(textoEncriptar[caracter] == "a" || textoEncriptar[caracter] == "e" || textoEncriptar[caracter] == "i" ||  textoEncriptar[caracter] == "o" || textoEncriptar[caracter] == "u"){

                    almacenar.push(textoEncriptar[caracter]);
                }

                else if(almacenar == ''){

                    almacenarDos.push(textoEncriptar[caracter]);
                    visibleArea.value = almacenarDos.join("");
                }

                else{

                    almacenar.push(textoEncriptar[caracter]);
                }
                
                var convertir = 0;

                    while(convertir < letras.length){

                        if(almacenar.join("") == letrasConvertidas[convertir]){                  
                           
                            //pushear primero los valores para guardarlos, luego agregar al area visible y el join para quitar comas

                            almacenar = [];
                            almacenarDos.push(letras[convertir]);
                            visibleArea.value = almacenarDos.join("");
                        
                            break;                                    
                        }  
                        convertir++;

                    }
                
            }

        }
    }
    var botonEncriptar = document.getElementById("chacha");
    botonEncriptar.onclick = encriptarMostrarOcultar;
    var botonDesencriptar = document.getElementById("desen");
    botonDesencriptar.onclick = desencriptarMostrarOcultar;

    </script>

</body>

</html>